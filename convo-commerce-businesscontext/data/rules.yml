version: "2.0"
rules:
#- rule: respond to FAQs
#  steps:
#  - intent: faq
#  - action: utter_faq
#- rule: respond to chitchat
#  steps:
#  - intent: chitchat
#  - action: utter_chitchat

- rule: out of scope
  steps:
  - or:
    - intent: nlu_fallback
    - intent: out_of_scope
  - action: utter_default


#- rule: Submit product stock form, survey complete
#  condition:
#  - active_loop: product_stock_form
#  - slot_was_set:
#    - survey_complete: True
#  steps:
#  - action: product_stock_form
#  - active_loop: null
#  - action: action_product_search
#  - action: survey_form
#  - active_loop: survey_form
#
#- rule: Submit product stock form, needs survey
#  condition:
#  - active_loop: product_stock_form
#  steps:
#  - action: product_stock_form
#  - active_loop: null
#  - action: action_product_search
#  - action: survey_form
#  - active_loop: survey_form
#
#
#
## order status
#
#- rule: Activate email form for order status
#  steps:
#  - intent: order_status
#  - action: action_order_status
#  - active_loop: null
#
#- rule: Submit order status form, survey complete
#  condition:
#  - active_loop: order_status_form
#  - slot_was_set:
#    - survey_complete: True
#  steps:
#  - action: order_status_form
#  - active_loop: null
#  - action: action_order_status
#
#- rule: Submit order status form, needs survey
#  condition:
#  - active_loop: order_status_form
#  steps:
#  - action: order_status_form
#  - active_loop: null
#  - action: action_order_status
#  - action: survey_form
#  - active_loop: survey_form
#
## cancel order
#
#- rule: Activate email form for cancelling order
#  steps:
#  - intent: order_cancel
#  - action: action_deactivate_loop
#  - active_loop: null
#  - action: cancel_form
#  - active_loop: cancel_form
#
#- rule: Submit cancel form, survey complete
#  condition:
#  - active_loop: cancel_form
#  - slot_was_set:
#    - survey_complete: True
#  steps:
#  - action: cancel_form
#  - active_loop: null
#  - action: action_cancel_order
#
#- rule: Submit cancel form, needs survey
#  condition:
#  - active_loop: cancel_form
#  steps:
#  - action: cancel_form
#  - active_loop: null
#  - action: action_cancel_order
#  - action: survey_form
#  - active_loop: survey_form
#
## return
#
#- rule: Activate email form for returning item
#  steps:
#  - intent: return
#  - action: action_deactivate_loop
#  - active_loop: null
#  - action: return_form
#  - active_loop: return_form
#
#- rule: Submit return form, survey complete
#  condition:
#  - active_loop: return_form
#  - slot_was_set:
#    - survey_complete: True
#  steps:
#  - action: return_form
#  - active_loop: null
#  - action: action_return
#
#- rule: Submit return form, needs survey
#  condition:
#  - active_loop: return_form
#  steps:
#  - action: return_form
#  - active_loop: null
#  - action: action_return
#  - action: survey_form
#  - active_loop: survey_form
#
## product updates
#
#- rule: Activate email form for product updates
#  steps:
#  - intent: product_updates
#  - action: action_deactivate_loop
#  - active_loop: null
#  - action: product_updates_form
#  - active_loop: product_updates_form
#
#- rule: Submit updates form, survey complete
#  condition:
#  - active_loop: product_updates_form
#  - slot_was_set:
#    - survey_complete: True
#  steps:
#  - action: product_updates_form
#  - active_loop: null
#  - action: utter_product_updates_finish
#
#- rule: Submit updates form, needs survey
#  condition:
#  - active_loop: product_updates_form
#  steps:
#  - action: product_updates_form
#  - active_loop: null
#  - action: utter_product_updates_finish
#  - action: survey_form
#  - active_loop: survey_form
#
#- rule: user uses negation to cancel out of product updates
#  condition:
#  - active_loop: product_updates_form
#  steps:
#  - intent: product_updates
#    entities:
#    - negation: value
#  - action: utter_start_over
#  - action: utter_greet
#  - action: action_deactivate_loop
#  - active_loop: null
#
## product search
#
#- rule: Activate form for product stock search
#  steps:
#  - intent: product_stock
#  - action: action_product_search
#  - active_loop: null
#
#- rule: Submit product stock form, survey complete
#  condition:
#  - active_loop: product_stock_form
#  - slot_was_set:
#    - survey_complete: True
#  steps:
#  - action: product_stock_form
#  - active_loop: null
#  - action: action_product_search
#  - action: survey_form
#  - active_loop: survey_form
#
#- rule: Submit product stock form, needs survey
#  condition:
#  - active_loop: product_stock_form
#  steps:
#  - action: product_stock_form
#  - active_loop: null
#  - action: action_product_search
#  - action: survey_form
#  - active_loop: survey_form
#
## product search
#
#- rule: Activate form for product add
#  steps:
#  - intent: product_stock_add
#  - action: action_product_add
#  - active_loop: null
#
#- rule: Submit product stock form, survey complete
#  condition:
#  - active_loop: product_stock_add_form
#  - slot_was_set:
#    - survey_complete: True
#  steps:
#  - action: product_stock_add_form
#  - active_loop: null
#  - action: action_product_add
#  - action: survey_form
#  - active_loop: survey_form
#
#- rule: Submit product stock form, needs survey
#  condition:
#  - active_loop: product_stock_add_form
#  steps:
#  - action: product_stock_add_form
#  - active_loop: null
#  - action: action_product_add
#  - action: survey_form
#  - active_loop: survey_form
#
## product search filter
#
#- rule: Activate form for product add
#  steps:
#  - intent: product_stock_filter
#  - action: action_product_filter
#  - active_loop: null
#
#- rule: Submit product stock form, survey complete
#  condition:
#  - active_loop: product_query_filter_form
#  - slot_was_set:
#    - survey_complete: True
#  steps:
#  - action: product_query_filter_form
#  - active_loop: null
#  - action: action_product_filter
#  - action: survey_form
#  - active_loop: survey_form
#
#- rule: Submit product stock form, needs survey
#  condition:
#  - active_loop: product_query_filter_form
#  steps:
#  - action: product_query_filter_form
#  - active_loop: null
#  - action: action_product_filter
#  - action: survey_form
#  - active_loop: survey_form
#
#
## submit survey (activation is appended to each form)
#
#- rule: Submit survey
#  condition:
#  - active_loop: survey_form
#  steps:
#  - action: survey_form
#  - active_loop: null
#  - action: action_survey_submit

- rule: open scanner
  steps:
    - intent: scanner
    - action: action_open_scanner

- rule: say amount
  steps:
    - intent: amount
    - action: action_say_amount

- rule: select account
  steps:
    - intent: account_selection
    - action: action_select_account

- rule: add remarks
  steps:
    - intent: remarks
    - action: action_add_remarks

- rule: add to favourites
  steps:
    - intent: add_to_favourites
    - action: action_add_to_favourites

- rule: make payment
  steps:
    - intent: payment
    - action: action_make_payment